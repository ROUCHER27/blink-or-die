# **"Blink or Die" (干眼症拯救者) \- 产品需求文档 (MVP版)**

**版本:** 1.0 (MVP \- 2 Hour Sprint)

**日期:** 2025-11-22

**状态:** 待开发

## **1\. 项目背景与目标**

现代人长时间盯着屏幕导致眨眼频率降低，进而引发干眼症。"Blink or Die" 是一个激进的健康辅助 Chrome 插件。

* **核心价值:** 强制用户眨眼，保护视力。  
* **核心理念:** "如果不眨眼，就别想看清屏幕。"  
* **MVP 目标:** 在 2 小时内完成核心链路开发，实现“监测 \-\> 倒计时 \-\> 视觉惩罚 \-\> 恢复”的闭环。

## **2\. 用户流程 (User Flow)**

1. **安装与授权:** 用户安装插件 \-\> 浏览器弹窗请求摄像头权限 \-\> 用户点击“允许”。  
2. **静默监测:** 插件在后台通过摄像头分析面部，开始 15 秒倒计时。  
3. **视觉惩罚:** 若用户 15 秒内未检测到眨眼 \-\> 当前网页画面逐渐模糊、变红（模拟充血）。  
4. **恢复清晰:** 用户进行一次有效眨眼 \-\> 倒计时重置，画面瞬间恢复清晰。

## **3\. 功能需求详述**

### **3.1 眨眼检测 (核心功能)**

* **输入:** 电脑摄像头视频流。  
* **逻辑:**  
  * 使用面部识别技术定位双眼。  
  * 实时计算眼睛纵横比 (EAR \- Eye Aspect Ratio)。  
  * 当 EAR 低于特定阈值（如 0.2）时，判定为“眨眼”。  
* **性能要求:** 必须在本地运行，无需联网，低 CPU 占用。

### **3.2 倒计时逻辑**

* **规则:** \* 系统维护一个 lastBlinkTimestamp（上次眨眼时间戳）。  
  * 每帧检查 CurrentTime \- lastBlinkTimestamp。  
  * 阈值设定为 **15秒**。  
* **重置条件:** 检测到一次有效眨眼动作。

### **3.3 视觉惩罚 (Punishment Mode)**

* **触发条件:** 距离上次眨眼超过 15 秒。  
* **表现形式:** \* 向当前激活的 Tab 页注入 CSS 滤镜。  
  * **效果:** 模糊 (blur) \+ 色相偏移/变红 (sepia/hue-rotate)。  
  * **动画:** 并非瞬间全盲，而是像“眼睛逐渐干涩”一样，在 2-3 秒内效果加重。

### **3.4 视觉恢复 (Redemption)**

* **触发条件:** 在惩罚模式下，检测到一次眨眼。  
* **表现形式:** 移除 CSS 滤镜，画面瞬间变回清晰。

## **4\. 非功能需求 (MVP 限制)**

* **UI:** 不做设置面板，不做开关，不做数据统计图表（节省时间）。  
* **兼容性:** 仅支持 Chrome 桌面版（利用 Offscreen API）。  
* **隐私:** 所有计算必须在浏览器本地完成，严禁上传视频流数据。

## **5\. 风险评估**

* **光线问题:** 弱光环境下识别率可能下降（MVP阶段暂不处理，依赖环境光）。  
* **误触:** 低头看键盘可能导致丢失眼部追踪（视为未眨眼，触发惩罚，逻辑上可接受）。